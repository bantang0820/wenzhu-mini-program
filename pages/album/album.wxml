<!--pages/album/album.wxml - ä¸“è¾‘è¯¦æƒ…é¡µ-->
<view class="container">
  <!-- ä¸“è¾‘å°é¢å¡ç‰‡ -->
  <view class="album-hero" style="background: linear-gradient(135deg, {{album.colorStart}} 0%, {{album.colorEnd}} 100%);">
    <!-- èƒŒæ™¯æ°´å° -->
    <text class="hero-watermark">{{album.icon}}</text>

    <!-- ä¸“è¾‘ä¿¡æ¯ -->
    <view class="album-hero-content">
      <view class="album-tag">{{album.tag}}</view>
      <text class="album-title">{{album.title}}</text>
      <text class="album-subtitle">{{album.subtitle}} - {{album.shortDesc}}</text>

      <!-- è¿›åº¦æ¡ -->
      <view class="hero-progress">
        <view class="progress-bar-bg">
          <view class="progress-bar-fill" style="width: {{album.progress}}%;"></view>
        </view>
        <view class="progress-info">
          <text class="progress-text">å·²å®Œæˆ {{album.progress}}%</text>
          <text class="progress-detail">{{completedCount}}/{{totalCount}} è¯¾</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ç« èŠ‚åˆ—è¡¨ -->
  <view class="chapters-section">
    <view class="section-header">
      <text class="section-title">ä¿®ä¹ ç« èŠ‚</text>
      <text class="section-subtitle">å¾ªåºæ¸è¿›ï¼Œæ·±åº¦ç»ƒä¹ </text>
    </view>

    <view class="chapter-list">
      <view
        class="chapter-card"
        wx:for="{{album.chapters}}"
        wx:key="id"
        bindtap="onChapterTap"
        data-id="{{item.id}}"
        data-locked="{{item.locked}}"
      >
        <!-- ç« èŠ‚åºå· -->
        <view class="chapter-number {{item.locked ? 'locked' : ''}}">
          <text class="number-text">{{item.id}}</text>
        </view>

        <!-- ç« èŠ‚ä¿¡æ¯ -->
        <view class="chapter-info">
          <text class="chapter-title">{{item.title}}</text>
          <text class="chapter-subtitle">{{item.subtitle}}</text>
        </view>

        <!-- ç« èŠ‚çŠ¶æ€ -->
        <view class="chapter-status">
          <text class="status-icon" wx:if="{{item.locked}}">ğŸ”’</text>
          <view class="status-progress" wx:else>
            <text class="progress-mini-text">{{item.completedCount}}/10</text>
          </view>
        </view>
      </view>
    </view>
  </view>
</view>
