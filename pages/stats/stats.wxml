<!--pages/stats/stats.wxml - ËßâÂØüÔºàÂøÉÁÅµËä±Âõ≠ + Â≤ÅÊúàÁõ∏ÂÜå + ÂÆùËóèÊäΩÂ±âÔºâ-->
<view class="container">
  <!-- Loading Áä∂ÊÄÅ -->
  <view class="loading-mask" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
  </view>
  <!-- ========== A. È°∂ÈÉ®ÔºöÂøÉÁÅµËä±Âõ≠ (35%) ========== -->
  <view class="hero-garden">
    <!-- Ê∞¥ÂΩ©Ê†ëËÉåÊôØ -->
    <view class="tree-background">
      <!-- ‰ΩøÁî® CSS ÁªòÂà∂Ê∞¥ÂΩ©È£éÊ†ºÁöÑÊ†ë -->
      <view class="watercolor-tree">
        <view class="tree-trunk"></view>
        <view class="tree-crown">
          <view class="leaf leaf-1"></view>
          <view class="leaf leaf-2"></view>
          <view class="leaf leaf-3"></view>
          <view class="leaf leaf-4"></view>
          <view class="leaf leaf-5"></view>
          <view class="leaf leaf-6"></view>
        </view>
      </view>
    </view>

    <!-- ÊÇ¨ÊµÆÂÆùÁâ©Â±Ç - Ê†ëÁöÑÁ≤æÁÅµ -->
    <view class="floating-treasures">
      <!-- Ê†ëÂÜ†Âë®Âõ¥ÔºàÂ§©Á©∫Ôºâ- ËΩªÁõàÁâ©ÂìÅÔºå‰∏ä‰∏ãÊµÆÂä® -->
      <view
        class="treasure-item sky-item floating"
        wx:for="{{skyTreasures}}"
        wx:key="id"
        style="left: {{item.position.left}}; top: {{item.position.top}};"
        bindtap="onTreasureTap"
        data-treasure="{{item}}"
      >
        <text class="treasure-icon">{{item.icon}}</text>
      </view>

      <!-- Ê†ëÊ†πÂ§ÑÔºàÂ§ßÂú∞Ôºâ- ÂéöÈáçÁâ©ÂìÅÔºåÈùôÊÄÅ -->
      <view
        class="treasure-item ground-item"
        wx:for="{{groundTreasures}}"
        wx:key="id"
        style="left: {{item.position.left}}; top: {{item.position.top}};"
        bindtap="onTreasureTap"
        data-treasure="{{item}}"
      >
        <text class="treasure-icon">{{item.icon}}</text>
      </view>

      <!-- Ê†ëÊ¥ûÂÖ•Âè£ - Êü•ÁúãÂÖ®ÈÉ® -->
      <view
        class="tree-hole"
        wx:if="{{hasMoreTreasures}}"
        bindtap="onTreeHoleTap"
      >
        <text class="tree-hole-icon">üçÑ</text>
      </view>
    </view>

    <!-- ÊÇ¨ÊµÆÊñáÂ≠óÊï∞ÊçÆ -->
    <view class="hero-text-overlay">
      <text class="hero-main-text font-serif">Â∑≤Ê≠£ÂøµËÇ≤ÂÑø</text>
      <text class="hero-number font-serif">{{totalDays}}</text>
      <text class="hero-unit font-serif">Â§©</text>
      <text class="hero-sub-text">ÂáªÈÄÄÁÑ¶Ëôë {{totalCount}} Ê¨°</text>
    </view>
  </view>

  <!-- ========== B. ‰∏≠ÈÉ®ÔºöÂ≤ÅÊúàÁõ∏ÂÜå (45%) ========== -->
  <view class="calendar-card-section">
    <!-- ÊÇ¨ÊµÆÁôΩËâ≤Âç°Áâá -->
    <view class="calendar-card neumorphism-elevated">
      <!-- Âç°ÁâáÊ†áÈ¢ò -->
      <view class="card-header">
        <view class="month-nav">
          <text class="nav-btn" bindtap="onPrevMonth">‚Äπ</text>
          <text class="month-title font-serif">{{monthDisplay}} ÁöÑËä±Âõ≠</text>
          <text class="nav-btn" bindtap="onNextMonth">‚Ä∫</text>
        </view>
      </view>

      <!-- Êó•ÂéÜÂÜÖÂÆπ -->
      <view class="calendar-content">
        <!-- ÊòüÊúüÊ†áÈ¢ò -->
        <view class="weekday-header">
          <text class="weekday" wx:for="{{['Êó•', '‰∏Ä', '‰∫å', '‰∏â', 'Âõõ', '‰∫î', 'ÂÖ≠']}}" wx:key="*this">{{item}}</text>
        </view>

        <!-- Êó•ÂéÜÁΩëÊ†º -->
        <view class="calendar-grid">
          <view
            class="calendar-day {{item.isEmpty ? 'empty' : ''}} {{item.isToday ? 'today' : ''}} {{item.isCheckedIn ? 'checked' : ''}}"
            wx:for="{{calendarDays}}"
            wx:key="index"
          >
            <text class="day-number" wx:if="{{!item.isEmpty}}">{{item.day}}</text>
            <!-- Ëä±ÊúµÂõæÊ†á -->
            <text class="flower-icon" wx:if="{{item.isCheckedIn && !item.isEmpty}}">üå∏</text>
          </view>
        </view>
      </view>
    </view>
  </view>

</view>
