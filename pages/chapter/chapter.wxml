<!--pages/chapter/chapter.wxml - ç« èŠ‚è¯¦æƒ…é¡µ-->
<view class="container">
  <!-- ========== ç« èŠ‚å¤´éƒ¨ ========== -->
  <view class="chapter-header">
    <view class="chapter-meta">
      <text class="chapter-number">ç¬¬ {{chapter.id}} ç« </text>
      <view class="chapter-divider">|</view>
      <text class="chapter-progress">{{completedCount}}/10 å¥</text>
    </view>
    <text class="chapter-title">{{chapter.title}}</text>
    <text class="chapter-subtitle">{{chapter.subtitle}}</text>
  </view>

  <!-- ========== ç»ƒä¹ å¥å­åˆ—è¡¨ ========== -->
  <view class="sentences-section">
    <view class="sentence-card" wx:for="{{sentences}}" wx:key="id">
      <!-- å¥å­åºå· -->
      <view class="sentence-number {{item.completed ? 'completed' : ''}}">
        {{item.id}}
      </view>

      <!-- å¥å­å†…å®¹ -->
      <view class="sentence-content">
        <text class="sentence-text">{{item.content}}</text>

        <!-- åœºæ™¯æ ‡ç­¾ -->
        <view class="scenario-tag" wx:if="{{item.scenario}}">
          <text class="scenario-icon">ğŸ’¡</text>
          <text class="scenario-text">{{item.scenario}}</text>
        </view>
      </view>

      <!-- æ“ä½œæŒ‰é’® -->
      <view class="sentence-actions">
        <view
          class="action-btn practice-btn"
          bindtap="onPracticeTap"
          data-id="{{item.id}}"
          data-content="{{item.content}}"
        >
          <text class="btn-icon">{{item.completed ? 'ğŸ”' : 'ğŸ¯'}}</text>
          <text class="btn-text">{{item.completed ? 'å†ç»ƒä¸€æ¬¡' : 'å¼€å§‹ç»ƒä¹ '}}</text>
        </view>

        <view
          class="action-btn complete-btn {{item.completed ? 'completed' : ''}}"
          bindtap="onCompleteTap"
          data-id="{{item.id}}"
        >
          <text class="btn-icon">{{item.completed ? 'âœ“' : 'â—‹'}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ========== åº•éƒ¨å®ŒæˆæŒ‰é’® ========== -->
  <view class="footer-action" wx:if="{{completedCount >= 6}}">
    <view class="complete-chapter-btn" bindtap="onCompleteChapter">
      <text class="btn-main-text">å®Œæˆæœ¬ç« èŠ‚</text>
      <text class="btn-sub-text">è§£é”ä¸‹ä¸€ç« </text>
    </view>
  </view>
</view>
